{% extends "base.html" %}

{% block title %}Hand #{{ hand_data.hand_id }} Analysis{% endblock %}

{% block content %}
<div class="analysis-view">
    <div class="analysis-header">
        <h2>Hand #{{ hand_data.hand_id }} Analysis</h2>
        <div class="analysis-meta">
            <span class="stakes">{{ hand_data.stakes }}</span>
            <span class="game-type">{{ hand_data.game_type }}</span>
            <span class="timestamp">{{ processed_at }}</span>
        </div>
    </div>
    
    <div class="analysis-content">
        <!-- Hand History Section -->
        <div class="section">
            <h3>🃏 Hand History</h3>
            <div class="hand-history">
                {{ formatted_hand }}
            </div>
        </div>
        
        <!-- GTO+ Solver Results -->
        <div class="section">
            <h3>🎯 GTO+ Solver Results</h3>
            
            <div class="solver-grid">
                <div class="solver-section">
                    <h4>📊 Ranges</h4>
                    <div class="ranges-display">
                        {{ formatted_ranges }}
                    </div>
                </div>
                
                <div class="solver-section">
                    <h4>📈 Frequencies</h4>
                    <div class="frequencies-display">
                        {{ formatted_frequencies }}
                    </div>
                </div>
                
                <div class="solver-section">
                    <h4>💰 EV Analysis</h4>
                    <div class="ev-display">
                        {{ formatted_ev }}
                    </div>
                </div>
            </div>
            
            {% if solver_result.processing_time %}
            <div class="processing-info">
                <small>Processing time: {{ "%.2f"|format(solver_result.processing_time) }}s</small>
            </div>
            {% endif %}
        </div>
        
        <!-- AI Analysis Section -->
        <div class="section">
            <h3>🤖 AI Strategic Analysis</h3>
            <div class="ai-analysis">
                {{ ai_analysis }}
            </div>
        </div>
    </div>
</div>
{% endblock %}